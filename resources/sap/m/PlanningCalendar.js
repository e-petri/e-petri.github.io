/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Control','sap/ui/base/ManagedObjectObserver','./PlanningCalendarRow','./library','sap/ui/unified/library','sap/ui/unified/calendar/CalendarUtils','sap/ui/unified/calendar/CalendarDate','sap/ui/unified/DateRange','sap/ui/unified/CalendarDateInterval','sap/ui/unified/CalendarWeekInterval','sap/ui/unified/CalendarOneMonthInterval','sap/ui/Device','sap/ui/core/ResizeHandler','sap/ui/core/Item','sap/m/Select','sap/m/Button','sap/m/Toolbar','sap/m/Table','sap/m/Column','./PlanningCalendarRenderer','jquery.sap.events'],function(q,C,M,P,l,u,a,b,D,c,d,e,f,R,I,S,B,T,g,h,k){"use strict";var m=u.CalendarDayType;var L=l.ListMode;var n=l.ToolbarDesign;var o=l.ButtonType;var p=l.PlanningCalendarBuiltInView;var r=l.ScreenSize;var s=u.CalendarAppointmentVisualization;var G=u.GroupAppointmentsMode;var t=u.CalendarIntervalType;var v=C.extend("sap.m.PlanningCalendar",{metadata:{library:"sap.m",properties:{startDate:{type:"object",group:"Data"},viewKey:{type:"string",group:"Appearance",defaultValue:t.Hour},singleSelection:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},showIntervalHeaders:{type:"boolean",group:"Appearance",defaultValue:true},showEmptyIntervalHeaders:{type:"boolean",group:"Appearance",defaultValue:true},showRowHeaders:{type:"boolean",group:"Appearance",defaultValue:true},noDataText:{type:"string",group:"Misc",defaultValue:null},groupAppointmentsMode:{type:"sap.ui.unified.GroupAppointmentsMode",group:"Appearance",defaultValue:G.Collapsed},appointmentsReducedHeight:{type:"boolean",group:"Appearance",defaultValue:false},appointmentsVisualization:{type:"sap.ui.unified.CalendarAppointmentVisualization",group:"Appearance",defaultValue:s.Standard},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showDayNamesLine:{type:"boolean",group:"Appearance",defaultValue:false},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:false},builtInViews:{type:"string[]",group:"Appearance",defaultValue:[]},stickyHeader:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{rows:{type:"sap.m.PlanningCalendarRow",multiple:true,singularName:"row"},views:{type:"sap.m.PlanningCalendarView",multiple:true,singularName:"view"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},toolbarContent:{type:"sap.ui.core.Control",multiple:true,singularName:"toolbarContent"},table:{type:"sap.m.Table",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{appointmentSelect:{parameters:{appointment:{type:"sap.ui.unified.CalendarAppointment"},appointments:{type:"sap.ui.unified.CalendarAppointment[]"},multiSelect:{type:"boolean"},domRefId:{type:"string"}}},intervalSelect:{parameters:{startDate:{type:"object"},endDate:{type:"object"},subInterval:{type:"boolean"},row:{type:"sap.m.PlanningCalendarRow"}}},rowSelectionChange:{parameters:{rows:{type:"sap.m.PlanningCalendarRow[]"}}},startDateChange:{},viewChange:{},rowHeaderClick:{row:{type:"sap.m.PlanningCalendarRow"}}},designtime:"sap/m/designtime/PlanningCalendar.designtime"},constructor:function(i,j){C.prototype.constructor.apply(this,arguments);if(typeof i!=="string"){j=i;}if(j&&typeof j.customAppointmentsSorterCallback==="function"){this._fnCustomSortedAppointments=j.customAppointmentsSorterCallback;}}});var w=["_oTimeInterval","_oDateInterval","_oMonthInterval","_oWeekInterval","_oOneMonthInterval"],x={};x[t.Day]={sInstanceName:"_oDateInterval",sIdSuffix:"-DateInt",oClass:c};x[t.Week]={sInstanceName:"_oWeekInterval",sIdSuffix:"-WeekInt",oClass:d};x[t.OneMonth]={sInstanceName:"_oOneMonthInterval",sIdSuffix:"-OneMonthInt",oClass:e};var A=r.Desktop;var K=[p.Hour,p.Day,p.Month,p.Week,p.OneMonth];var y={PHONE:"600",TABLET:"1024"};var z=["sap.ui.unified.CalendarTimeInterval","sap.ui.unified.CalendarDateInterval","sap.ui.unified.CalendarMonthInterval"];var E=C.extend("CalendarHeader",{metadata:{aggregations:{"toolbar":{type:"sap.m.Toolbar",multiple:false},"allCheckBox":{type:"sap.m.CheckBox",multiple:false}}},renderer:function(i,j){i.write("<div");i.writeControlData(j);i.addClass("sapMPlanCalHead");i.writeClasses();i.write(">");var e1=j.getToolbar();if(e1){i.renderControl(e1);}var f1=j.getAllCheckBox();if(f1){i.renderControl(f1);}i.write("</div>");}});v.prototype.init=function(){this._iBreakPointTablet=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=f.media._predefinedRangeSets[f.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];if(f.system.phone||q('html').hasClass("sapUiMedia-Std-Phone")){this._iSize=0;this._iSizeScreen=0;}else if(f.system.tablet||q('html').hasClass("sapUiMedia-Std-Tablet")){this._iSize=1;this._iSizeScreen=1;}else{this._iSize=2;this._iSizeScreen=2;}this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.m");var i=this.getId();this._oIntervalTypeSelect=new S(i+"-IntType",{maxWidth:"15rem",ariaLabelledBy:i+"-SelDescr"});this._oIntervalTypeSelect.attachEvent("change",_,this);this._oTodayButton=new B(i+"-Today",{text:this._oRB.getText("PLANNINGCALENDAR_TODAY"),type:o.Transparent});this._oTodayButton.attachEvent("press",this._handleTodayPress,this);this._oHeaderToolbar=new T(i+"-HeaderToolbar",{design:n.Transparent,content:[this._oIntervalTypeSelect,this._oTodayButton]});this._oCalendarHeader=new E(i+"-CalHead",{toolbar:this._oHeaderToolbar});this._oInfoToolbar=new T(i+"-InfoToolbar",{height:"auto",design:n.Transparent,content:[this._oCalendarHeader,this._oTimeInterval]});var j=new g(i+"-Table",{sticky:[],infoToolbar:this._oInfoToolbar,mode:L.SingleSelectMaster,columns:[new h({styleClass:"sapMPlanCalRowHead"}),new h({width:"80%",styleClass:"sapMPlanCalAppRow",minScreenWidth:A,demandPopin:true})],ariaLabelledBy:i+"-Descr"});j.attachEvent("selectionChange",Q,this);j.addDelegate({onBeforeRendering:function(){if(this._rowHeaderClickEvent){this._rowHeaderClickEvent.off();}},onAfterRendering:function(){this._rowHeaderClickEvent=j.$().find(".sapMPlanCalRowHead > div.sapMLIB").click(function(e1){var f1=q(e1.currentTarget).control(0),g1=sap.ui.getCore().byId(f1.getAssociation("parentRow"));this.fireRowHeaderClick({row:g1});}.bind(this));}},false,this);this.setAggregation("table",j,true);this.setStartDate(new Date());this._resizeProxy=q.proxy(N,this);this._fnCustomSortedAppointments=undefined;};v.prototype.exit=function(){if(this._sResizeListener){R.deregister(this._sResizeListener);this._sResizeListener=undefined;}f.orientation.detachHandler(this._updateStickyHeader,this);if(this._sUpdateCurrentTime){q.sap.clearDelayedCall(this._sUpdateCurrentTime);this._sUpdateCurrentTime=undefined;}var i=this.getAggregation("table");i.removeAllItems();w.forEach(function(e1){if(this[e1]){this[e1]._oPlanningCalendar=undefined;this[e1].destroy();this[e1]=undefined;}},this);if(this._oViews){for(var j in this._oViews){this._oViews[j].destroy();}}if(this._oSelectAllCheckBox){this._oSelectAllCheckBox.destroy();}if(this.getToolbarContent().length==0&&this._oToolbar){this._oToolbar.destroy();this._oToolbar=undefined;}if(this._rowHeaderClickEvent){this._rowHeaderClickEvent.off();this._rowHeaderClickEvent=null;}};v.prototype.onBeforeRendering=function(){this._bBeforeRendering=true;if((!this._oTimeInterval&&!this._oDateInterval&&!this._oMonthInterval&&!this._oWeekInterval&&!this._oOneMonthInterval)||this._bCheckView){this.setViewKey(this.getViewKey());this._bCheckView=undefined;}X.call(this);if(this._sUpdateCurrentTime){q.sap.clearDelayedCall(this._sUpdateCurrentTime);this._sUpdateCurrentTime=undefined;}this._updateTodayButtonState();f.orientation.detachHandler(this._updateStickyHeader,this);this._bBeforeRendering=undefined;};v.prototype._updateTodayButtonState=function(){if(this._oTodayButton){this._oTodayButton.setEnabled(!this._dateMatchesVisibleRange(new Date(),this.getViewKey()));}};v.prototype._dateMatchesVisibleRange=function(i,j){var e1=this._getView(j,!this._bBeforeRendering);if(!e1){return false;}var f1=e1.getIntervalType(),g1=x[f1],h1=g1?this[g1.sInstanceName]:null,i1=false;if(h1&&h1._dateMatchesVisibleRange){i1=h1._dateMatchesVisibleRange(i);}return i1;};v.prototype.onAfterRendering=function(i){i.size={width:this.getDomRef().offsetWidth};N.call(this,i,true);if(!this._sResizeListener){this._sResizeListener=R.register(this,this._resizeProxy);}if(f.system.phone&&this.getStickyHeader()){f.orientation.attachHandler(this._updateStickyHeader,this);}this._updateCurrentTimeVisualization(false);};v.prototype.setStartDate=function(i){var j,e1;if(!i){i=new Date();}else{a._checkJSDateObject(i);}if(this.getViewKey()===p.Week){j=a.getFirstDateOfWeek(a._createUniversalUTCDate(i,undefined,true));i.setTime(a._createLocalDate(j,true).getTime());}if(this.getViewKey()===p.OneMonth){e1=a.getFirstDateOfMonth(a._createUniversalUTCDate(i,undefined,true));i.setTime(a._createLocalDate(e1,true).getTime());}if(q.sap.equal(i,this.getStartDate())){this._updateTodayButtonState();return this;}var f1=i.getFullYear();a._checkYearInValidRange(f1);var g1=this.getMinDate();if(g1&&g1.getTime()>i.getTime()){q.sap.log.warning("StartDate < minDate -> StartDate set to minDate",this);i=new Date(g1.getTime());}else{var h1=this.getMaxDate();if(h1&&h1.getTime()<i.getTime()){q.sap.log.warning("StartDate > maxDate -> StartDate set to minDate",this);if(g1){i=new Date(g1.getTime());}else{i=new Date(1,0,1);i.setFullYear(1);}}}this.setProperty("startDate",i,true);w.forEach(function(i1){if(this[i1]){this[i1].setStartDate(new Date(i.getTime()));}},this);this._setRowsStartDate(new Date(i.getTime()));if(this.getViewKey()===p.Week||this.getViewKey()===p.OneMonth){this._updateTodayButtonState();}if(this.getDomRef()){this._updateCurrentTimeVisualization(false);}return this;};v.prototype.setMinDate=function(i){if(q.sap.equal(i,this.getMinDate())){return this;}var j=this.getMaxDate();if(i){a._checkJSDateObject(i);var e1=i.getFullYear();a._checkYearInValidRange(e1);this.setProperty("minDate",i,true);this._bNoStartDateChange=true;w.forEach(function(h1){if(this[h1]){this[h1].setMinDate(new Date(i.getTime()));}},this);if(j&&j.getTime()<i.getTime()){q.sap.log.warning("minDate > maxDate -> maxDate set to end of the month",this);j=new Date(i.getTime());j.setMonth(j.getMonth()+1,0);j.setHours(23);j.setMinutes(59);j.setSeconds(59);j.setMilliseconds(0);this.setMaxDate(j);}this._bNoStartDateChange=undefined;var f1=this.getStartDate();if(f1&&f1.getTime()<i.getTime()){q.sap.log.warning("StartDate < minDate -> StartDate set to minDate",this);f1=new Date(i.getTime());this.setStartDate(f1);}}else{this.setProperty("minDate",undefined,true);w.forEach(function(h1){if(this[h1]){this[h1].setMinDate();}},this);}var g1=new Date();if(i&&g1.getTime()<i.getTime()){this._oTodayButton.setVisible(false);}else if(!j||g1.getTime()<j.getTime()){this._oTodayButton.setVisible(true);}return this;};v.prototype.setMaxDate=function(i){if(q.sap.equal(i,this.getMaxDate())){return this;}var j=this.getMinDate();if(i){a._checkJSDateObject(i);var e1=i.getFullYear();a._checkYearInValidRange(e1);this.setProperty("maxDate",i,true);this._bNoStartDateChange=true;w.forEach(function(h1){if(this[h1]){this[h1].setMaxDate(new Date(i.getTime()));}},this);if(j&&j.getTime()>i.getTime()){q.sap.log.warning("maxDate < minDate -> maxDate set to begin of the month",this);j=new Date(i.getTime());j.setDate(1);j.setHours(0);j.setMinutes(0);j.setSeconds(0);j.setMilliseconds(0);this.setMinDate(j);}this._bNoStartDateChange=undefined;var f1=this.getStartDate();if(f1&&f1.getTime()>i.getTime()){q.sap.log.warning("StartDate > maxDate -> StartDate set to minDate",this);if(j){f1=new Date(j.getTime());}else{f1=new Date(1,0,1);f1.setFullYear(1);}this.setStartDate(f1);}}else{this.setProperty("maxDate",undefined,true);w.forEach(function(h1){if(this[h1]){this[h1].setMaxDate();}},this);}var g1=new Date();if(i&&g1.getTime()>i.getTime()){this._oTodayButton.setVisible(false);}else if(!j||g1.getTime()>j.getTime()){this._oTodayButton.setVisible(true);}return this;};v.prototype.removeIntervalInstanceFromInfoToolbar=function(){var i=this._oInfoToolbar.getContent();i.forEach(function(j){if(j.isA(z)){this._oInfoToolbar.removeContent(j);}}.bind(this));};v.prototype.setViewKey=function(j){var e1,f1,g1,h1=this.getViewKey(),i1;this.setProperty("viewKey",j,true);this._oIntervalTypeSelect.setSelectedKey(j);this.removeIntervalInstanceFromInfoToolbar();if(j===p.Week||j===p.OneMonth){f1=this.getStartDate();this.setStartDate(new Date(f1.getTime()));if(f1.getTime()!==this.getStartDate().getTime()){this.fireStartDateChange();}}var j1=this.getStartDate();var k1=this.getMinDate();var l1=this.getMaxDate();var m1=this._getView(j,!this._bBeforeRendering);if(!m1){this._bCheckView=true;this.invalidate();}else{var n1=m1.getIntervalType();var o1=this._getIntervals(m1);this._bCheckView=false;switch(n1){case t.Hour:if(!this._oTimeInterval){this._oTimeInterval=new sap.ui.unified.CalendarTimeInterval(this.getId()+"-TimeInt",{startDate:new Date(j1.getTime()),items:o1,pickerPopup:true,legend:this.getLegend()});this._oTimeInterval.attachEvent("startDateChange",this._handleStartDateChange,this);this._oTimeInterval.attachEvent("select",this._handleCalendarSelect,this);this._oTimeInterval._oPlanningCalendar=this;this._oTimeInterval.getSpecialDates=function(){return this._oPlanningCalendar.getSpecialDates();};if(k1){this._oTimeInterval.setMinDate(new Date(k1.getTime()));}if(l1){this._oTimeInterval.setMaxDate(new Date(l1.getTime()));}}else if(this._oTimeInterval.getItems()!=o1){this._oTimeInterval.setItems(o1);}this._insertInterval(this._oTimeInterval);break;case t.Day:case t.Week:case t.OneMonth:g1=x[n1];e1=this[g1.sInstanceName];if(!e1){e1=new g1.oClass(this.getId()+g1.sIdSuffix,{startDate:new Date(j1.getTime()),days:o1,showDayNamesLine:this.getShowDayNamesLine(),pickerPopup:true,legend:this.getLegend(),showWeekNumbers:this.getShowWeekNumbers()});e1.attachEvent("startDateChange",this._handleStartDateChange,this);e1.attachEvent("select",this._handleCalendarSelect,this);if(j===p.OneMonth){e1._setRowsStartDate=this._setRowsStartDate.bind(this);}e1._oPlanningCalendar=this;e1.getSpecialDates=function(){return this._oPlanningCalendar.getSpecialDates();};if(k1){e1.setMinDate(new Date(k1.getTime()));}if(l1){e1.setMaxDate(new Date(l1.getTime()));}}else if(e1.getDays()!==o1){e1.setDays(o1);}this._insertInterval(e1);this[g1.sInstanceName]=e1;break;case t.Month:if(!this._oMonthInterval){this._oMonthInterval=new sap.ui.unified.CalendarMonthInterval(this.getId()+"-MonthInt",{startDate:new Date(j1.getTime()),months:o1,pickerPopup:true,legend:this.getLegend()});this._oMonthInterval.attachEvent("startDateChange",this._handleStartDateChange,this);this._oMonthInterval.attachEvent("select",this._handleCalendarSelect,this);this._oMonthInterval._oPlanningCalendar=this;this._oMonthInterval.getSpecialDates=function(){return this._oPlanningCalendar.getSpecialDates();};if(k1){this._oMonthInterval.setMinDate(new Date(k1.getTime()));}if(l1){this._oMonthInterval.setMaxDate(new Date(l1.getTime()));}}else if(this._oMonthInterval.setMonths()!=o1){this._oMonthInterval.setMonths(o1);}this._insertInterval(this._oMonthInterval);break;default:throw new Error("Unknown IntervalType: "+n1+"; "+this);}var p1=this.getRows();for(var i=0;i<p1.length;i++){var q1=p1[i];var r1=q1.getCalendarRow();r1.setIntervalType(n1);r1.setIntervals(o1);r1.setShowSubIntervals(m1.getShowSubIntervals());}if(this.getDomRef()){this._updateCurrentTimeVisualization(false);H.call(this,this.getShowWeekNumbers(),this._viewAllowsWeekNumbers(j));J.call(this,this.getShowDayNamesLine(),!!e1);}}if(this._oOneMonthInterval&&j===p.OneMonth){this._oOneMonthInterval._setDisplayMode(this._iSize);this._oOneMonthInterval._adjustSelectedDate(b.fromLocalJSDate(f1));if(this._iSize<2){this._setRowsStartDate(f1);}}else if(this._oOneMonthInterval&&h1===p.OneMonth&&this._oOneMonthInterval.getSelectedDates().length){i1=this._oOneMonthInterval.getSelectedDates()[0].getStartDate();if(i1){this.setStartDate(i1);}}this._updateTodayButtonState();return this;};v.prototype._insertInterval=function(i){if(this._iSizeScreen>1){this._oInfoToolbar.addContent(i);}else{this._oInfoToolbar.insertContent(i,1);}};v.prototype._viewAllowsWeekNumbers=function(i){var j=this._getView(i).getIntervalType(),e1=x[j];return!!e1&&!!e1.oClass.prototype.setShowWeekNumbers;};v.prototype._viewAllowsDayNamesLine=function(i){var j=this._getView(i).getIntervalType(),e1=x[j];return!!e1&&!!e1.oClass.prototype.setShowDayNamesLine;};v.prototype._getIntervalInstanceByViewKey=function(i){var j=this._getView(i).getIntervalType(),e1=x[j],f1;if(e1){f1=this[e1.sInstanceName];}return f1;};v.prototype.setShowWeekNumbers=function(i){this.setProperty("showWeekNumbers",i,true);this._getViews().forEach(function(j){var e1=j.getKey(),f1=this._viewAllowsWeekNumbers(e1),g1=this._getIntervalInstanceByViewKey(e1);if(g1&&f1){this._getIntervalInstanceByViewKey(e1).setShowWeekNumbers(i);}if(this.getDomRef()&&this.getViewKey()===e1){H.call(this,i,f1);}},this);return this;};v.prototype.setShowIntervalHeaders=function(j){this.setProperty("showIntervalHeaders",j,true);var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().setShowIntervalHeaders(j);}return this;};v.prototype.setShowEmptyIntervalHeaders=function(j){this.setProperty("showEmptyIntervalHeaders",j,true);var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().setShowEmptyIntervalHeaders(j);}return this;};v.prototype.setGroupAppointmentsMode=function(j){this.setProperty("groupAppointmentsMode",j,true);var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().setGroupAppointmentsMode(j);}return this;};v.prototype.setAppointmentsReducedHeight=function(j){this.setProperty("appointmentsReducedHeight",j,true);var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().setAppointmentsReducedHeight(j);}return this;};v.prototype.setAppointmentsVisualization=function(j){this.setProperty("appointmentsVisualization",j,true);var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().setAppointmentsVisualization(j);}return this;};v.prototype.setShowRowHeaders=function(i){this.setProperty("showRowHeaders",i,true);var j=this.getAggregation("table");j.getColumns()[0].setVisible(i);this._toggleAppointmentsColumnPopinState(i);this.$().toggleClass("sapMPlanCalNoHead",!i);a1.call(this);c1.call(this);return this;};v.prototype.setShowDayNamesLine=function(i){var j,e1,f1,g1=!!this.getDomRef(),h1=this.getViewKey();for(j in x){e1=x[j].sInstanceName;if(this[e1]){f1=this[e1];f1.setShowDayNamesLine(i);if(g1&&j===h1){J.call(this,i,true);}}}return this.setProperty("showDayNamesLine",i,false);};v.prototype.setStickyHeader=function(i){if(this.getStickyHeader()===i){return this;}this.setProperty("stickyHeader",i,true);if(f.system.phone){if(i){f.orientation.attachHandler(this._updateStickyHeader,this);}else{f.orientation.detachHandler(this._updateStickyHeader,this);}}this._updateStickyHeader();return this;};v.prototype._updateStickyHeader=function(){var i=[],j=this.getStickyHeader(),e1=this.getViewKey()===p.OneMonth&&this._iSize<2,f1=j&&!f.system.phone&&!e1,g1=j&&!(f.system.phone&&f.orientation.landscape)&&!e1;if(this._oToolbar&&f1){i.push(sap.m.Sticky.HeaderToolbar);}if(this._oInfoToolbar&&g1){i.push(sap.m.Sticky.InfoToolbar);}this.getAggregation("table").setSticky(i);};v.prototype.addRow=function(i){this.addAggregation("rows",i,true);i.attachEvent("_change",b1,this);var j=this.getAggregation("table");j.addItem(i.getColumnListItem());var e1=i.getCalendarRow();e1.setStartDate(this.getStartDate());e1.setShowIntervalHeaders(this.getShowIntervalHeaders());e1.setShowEmptyIntervalHeaders(this.getShowEmptyIntervalHeaders());e1.setGroupAppointmentsMode(this.getGroupAppointmentsMode());e1.setAppointmentsReducedHeight(this.getAppointmentsReducedHeight());e1.setLegend(this.getLegend());e1.setAppointmentsVisualization(this.getAppointmentsVisualization());e1.attachEvent("select",O,this);e1.attachEvent("startDateChange",this._handleStartDateChange,this);e1.attachEvent("leaveRow",Z,this);e1.attachEvent("intervalSelect",F,this);$.call(this);if(d1.call(this)){var f1=this.getViewKey();var g1=this._getView(f1);var h1=g1.getIntervalType();var i1=this._getIntervals(g1);e1.setIntervalType(h1);e1.setIntervals(i1);e1.setShowSubIntervals(g1.getShowSubIntervals());}c1.call(this);if(this._fnCustomSortedAppointments){e1._setCustomAppointmentsSorterCallback(this._fnCustomSortedAppointments);}return this;};v.prototype.insertRow=function(i,j){this.insertAggregation("rows",i,j);i.attachEvent("_change",b1,this);var e1=this.getAggregation("table");e1.insertItem(i.getColumnListItem(),j,true);var f1=i.getCalendarRow();f1.setStartDate(this.getStartDate());f1.setShowIntervalHeaders(this.getShowIntervalHeaders());f1.setShowEmptyIntervalHeaders(this.getShowEmptyIntervalHeaders());f1.setGroupAppointmentsMode(this.getGroupAppointmentsMode());f1.setAppointmentsReducedHeight(this.getAppointmentsReducedHeight());f1.setLegend(this.getLegend());f1.setAppointmentsVisualization(this.getAppointmentsVisualization());f1.attachEvent("select",O,this);f1.attachEvent("startDateChange",this._handleStartDateChange,this);f1.attachEvent("leaveRow",Z,this);f1.attachEvent("intervalSelect",F,this);if(this._fnCustomSortedAppointments){f1._setCustomAppointmentsSorterCallback(this._fnCustomSortedAppointments);}$.call(this);if(d1.call(this)){var g1=this.getViewKey();var h1=this._getView(g1);var i1=h1.getIntervalType();var j1=this._getIntervals(h1);f1.setIntervalType(i1);f1.setIntervals(j1);f1.setShowSubIntervals(h1.getShowSubIntervals());}c1.call(this);return this;};v.prototype.removeRow=function(i){var j=this.removeAggregation("rows",i,true);j.detachEvent("_change",b1,this);var e1=this.getAggregation("table");e1.removeItem(j.getColumnListItem(),true);var f1=j.getCalendarRow();f1.detachEvent("select",O,this);f1.detachEvent("startDateChange",this._handleStartDateChange,this);f1.detachEvent("leaveRow",Z,this);f1.detachEvent("intervalSelect",F,this);if(this._fnCustomSortedAppointments){f1._fnCustomSortedAppointments=undefined;}$.call(this);c1.call(this);return j;};v.prototype.removeAllRows=function(){var j=this.removeAllAggregation("rows",true);var e1=this.getAggregation("table");e1.removeAllItems(true);for(var i=0;i<j.length;i++){var f1=j[i];f1.detachEvent("_change",b1,this);var g1=f1.getCalendarRow();g1.detachEvent("select",O,this);g1.detachEvent("startDateChange",this._handleStartDateChange,this);g1.detachEvent("leaveRow",Z,this);g1.detachEvent("intervalSelect",F,this);if(this._fnCustomSortedAppointments){g1._fnCustomSortedAppointments=undefined;}}$.call(this);c1.call(this);return j;};v.prototype.destroyRows=function(){var i=this.destroyAggregation("rows",true);var j=this.getAggregation("table");j.destroyItems(true);$.call(this);c1.call(this);return i;};v.prototype.addToolbarContent=function(i){this.addAggregation("toolbarContent",i,true);U.call(this);return this;};v.prototype.insertToolbarContent=function(i,j){this.insertAggregation("toolbarContent",i,j);U.call(this);return this;};v.prototype.removeToolbarContent=function(i){var j=this.removeAggregation("toolbarContent",i,true);U.call(this);return j;};v.prototype.removeAllToolbarContent=function(){var i=this.removeAllAggregation("toolbarContent",true);U.call(this);return i;};v.prototype.destroyToolbarContent=function(){var i=this.destroyAggregation("toolbarContent",true);U.call(this);return i;};v.prototype.indexOfContent=function(i){return this.indexOfToolbarContent(i);};v.prototype.setSingleSelection=function(i){this.setProperty("singleSelection",i,true);a1.call(this);c1.call(this);if(i){this.selectAllRows(false);}else{$.call(this);}this.$().toggleClass("sapMPlanCalMultiSel",!i);return this;};v.prototype.setNoDataText=function(i){this.setProperty("noDataText",i,true);var j=this.getAggregation("table");j.setNoDataText(i);return this;};v.prototype.setLegend=function(j){this.setAssociation("legend",j,true);var e1=this.getRows(),f1=this.getLegend()&&sap.ui.getCore().byId(this.getLegend()),g1;for(var i=0;i<e1.length;i++){var h1=e1[i];h1.getCalendarRow().setLegend(j);}w.forEach(function(i1){if(this[i1]){this[i1].setLegend(j);}},this);if(f1){g1=new M(function(i1){this.invalidate();}.bind(this));g1.observe(f1,{destroy:true});}return this;};v.prototype.addAriaLabelledBy=function(i){this.addAssociation("ariaLabelledBy",i,true);var j=this.getAggregation("table");j.addAriaLabelledBy(i);return this;};v.prototype.removeAriaLabelledBy=function(i){this.removeAssociation("ariaLabelledBy",i,true);var j=this.getAggregation("table");j.removeAriaLabelledBy(i);return this;};v.prototype.removeAllAriaLabelledBy=function(){this.removeAllAssociation("ariaLabelledBy",true);var i=this.getAggregation("table");i.removeAllAriaLabelledBy();i.addAriaLabelledBy(this.getId()+"-Descr");return this;};v.prototype.invalidate=function(i){var j=i&&i instanceof D;if(!this._bIsBeingDestroyed&&(this._bDateRangeChanged||j)){if(this.getDomRef()){var e1=this.getViewKey();var f1=this._getView(e1);var g1=f1.getIntervalType();switch(g1){case t.Hour:if(this._oTimeInterval){this._oTimeInterval.invalidate(arguments);}break;case t.Day:if(this._oDateInterval){this._oDateInterval.invalidate(arguments);}break;case t.Month:if(this._oMonthInterval){this._oMonthInterval.invalidate(arguments);}break;case t.OneMonth:if(this._oOneMonthInterval){this._oOneMonthInterval.invalidate(arguments);}break;case t.Week:if(this._oWeekInterval){this._oWeekInterval.invalidate(arguments);}break;default:throw new Error("Unknown IntervalType: "+g1+"; "+this);}}this._bDateRangeChanged=undefined;}else{if(i&&i instanceof sap.m.PlanningCalendarView){this._bCheckView=true;}C.prototype.invalidate.apply(this,arguments);}};v.prototype.addSpecialDate=function(i){this._bDateRangeChanged=true;if(i.getType()===m.NonWorking){this.getAggregation("rows").forEach(function(j){j.addAggregation("_nonWorkingDates",this._buildPCRowDateRange(i));},this);}return C.prototype.addAggregation.call(this,"specialDates",i);};v.prototype.insertSpecialDate=function(i,j){this._bDateRangeChanged=true;if(i.getType()===m.NonWorking){this.getAggregation("rows").forEach(function(e1){e1.insertAggregation("_nonWorkingDates",this._buildPCRowDateRange(i),j);},this);}return C.prototype.insertAggregation.call(this,"specialDates",i,j);};v.prototype.removeSpecialDate=function(i){var j;if(typeof i==="string"){i=sap.ui.getCore().byId(i);}this._bDateRangeChanged=true;if(i&&i.getType()===m.NonWorking){this.getAggregation("rows").forEach(function(e1){if(e1.getAggregation("_nonWorkingDates")){j=e1.getAggregation("_nonWorkingDates").filter(function(f1){return f1.data(P.PC_FOREIGN_KEY_NAME)===i.getId();});if(j.length){e1.removeAggregation("_nonWorkingDates",j[0]);}}});}return C.prototype.removeAggregation.call(this,"specialDates",i);};v.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;if(this.getAggregation("rows")){this.getAggregation("rows").forEach(function(i){i.removeAllAggregation("_nonWorkingDates");});}return this.removeAllAggregation("specialDates");};v.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;this.getAggregation("rows").forEach(function(i){i.destroyAggregation("_nonWorkingDates");});return this.destroyAggregation("specialDates");};v.prototype.removeAllViews=function(){this._bCheckView=true;var i=this.removeAllAggregation("views"),j=this.getBuiltInViews();if(j.length){this.setViewKey(j[0]);}else{this.setViewKey(K[0]);}return i;};v.prototype.destroyViews=function(){this._bCheckView=true;var i=this.destroyAggregation("views"),j=this.getBuiltInViews();if(j.length){this.setViewKey(j[0]);}else{this.setViewKey(K[0]);}return i;};v.prototype.getSelectedRows=function(){return this.getRows().filter(function(i){return i.getSelected();});};v.prototype.selectAllRows=function(j){var e1=this.getRows();if(!(j&&this.getSingleSelection())){for(var i=0;i<e1.length;i++){var f1=e1[i];f1.setSelected(j);}if(this._oSelectAllCheckBox){this._oSelectAllCheckBox.setSelected(j);}}return this;};v.prototype.onsaphomemodifiers=function(i){if((i.metaKey||i.ctrlKey)&&!i.altKey&&!i.shiftKey){var j=this.getRows();var e1=j[0];var f1=new q.Event("saphome");f1._bPlanningCalendar=true;e1.getCalendarRow().onsaphome(f1);i.preventDefault();i.stopPropagation();}};v.prototype.onsapendmodifiers=function(i){if((i.metaKey||i.ctrlKey)&&!i.altKey&&!i.shiftKey){var j=this.getRows();var e1=j[j.length-1];var f1=new q.Event("sapend");f1._bPlanningCalendar=true;e1.getCalendarRow().onsapend(f1);i.preventDefault();i.stopPropagation();}};v.prototype.setBuiltInViews=function(i){this.setProperty("builtInViews",i);this.setViewKey(this._getViews()[0].getKey());return this;};v.prototype.removeView=function(i){var j=this.removeAggregation("views",i);if(!this.getViews().length){this.setViewKey(this._getViews()[0].getKey());}return j;};v.prototype._getIntervals=function(i){var j=0;switch(this._iSize){case 0:j=i.getIntervalsS();break;case 1:j=i.getIntervalsM();break;default:j=i.getIntervalsL();break;}return j;};v.prototype._getView=function(j,e1){var f1=this._getViews();var g1;for(var i=0;i<f1.length;i++){g1=f1[i];if(g1.getKey()!=j){g1=undefined;}else{break;}}if(!g1&&!e1){throw new Error("PlanningCalendarView with key "+j+"not assigned "+this);}return g1;};v.prototype._changeStartDate=function(i){if(this._bNoStartDateChange){return;}this.setStartDate(new Date(i.getTime()));this.fireStartDateChange();};v.prototype._updateCurrentTimeVisualization=function(j){if(this._sUpdateCurrentTime){q.sap.clearDelayedCall(this._sUpdateCurrentTime);this._sUpdateCurrentTime=undefined;}if(j){var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i];f1.getCalendarRow().updateCurrentTimeVisualization();}}var g1=new Date();var h1=this.getStartDate();var i1=this.getViewKey();var j1=this._getView(i1);var k1=j1.getIntervalType();var l1=this._getIntervals(j1);var m1=0;var n1=0;var o1=0;switch(k1){case t.Hour:m1=60000;n1=h1.getTime()-3600000;o1=h1.getTime()+l1*3600000;break;case t.Day:case t.Week:case t.OneMonth:m1=1800000;n1=h1.getTime()-3600000;o1=h1.getTime()+l1*86400000;break;default:m1=-1;break;}if(g1.getTime()<=o1&&g1.getTime()>=n1&&m1>0){this._sUpdateCurrentTime=q.sap.delayedCall(m1,this,'_updateCurrentTimeVisualization',[true]);}};function _(i){this.setViewKey(i.getParameter("selectedItem").getKey());this.fireViewChange();}v.prototype._handleTodayPress=function(i){var j=new Date(),e1,f1=this.getViewKey();if(f1===p.OneMonth){e1=a.getFirstDateOfMonth(a._createUniversalUTCDate(j,undefined,true));this._oOneMonthInterval._adjustSelectedDate(b.fromLocalJSDate(j),false);j=a._createLocalDate(e1,true);}if(f1===p.Week){e1=this.getStartDate();j.setHours(e1.getHours());j.setMinutes(e1.getMinutes());j.setSeconds(e1.getSeconds());}this.setStartDate(j);this.fireStartDateChange();};v.prototype._handleStartDateChange=function(i){var j=i.oSource.getStartDate();this._changeStartDate(j);};v.prototype._handleCalendarSelect=function(i){var j=i.oSource.getSelectedDates();var e1=new Date(j[0].getStartDate());var f1=a._createUniversalUTCDate(e1,undefined,true);var g1=this.getViewKey();var h1=this._getView(g1);var i1=h1.getIntervalType();if(i1!==t.OneMonth||this._iSize>1){j[0].setStartDate();}switch(i1){case t.Hour:f1.setUTCHours(f1.getUTCHours()+1);break;case t.Day:case t.Week:f1.setUTCDate(f1.getUTCDate()+1);break;case t.OneMonth:if(this._iSize<2){var j1=new Date(e1.getTime());if(a.monthsDiffer(this.getStartDate(),e1)){this.setStartDate(e1);}this._setRowsStartDate(j1);this._oOneMonthInterval.getAggregation('month')[0]._focusDate(b.fromLocalJSDate(j1),true);}else if(a._isNextMonth(e1,this.getStartDate())){this._oOneMonthInterval._handleNext();return;}f1.setUTCDate(f1.getUTCDate()+1);break;case t.Month:f1.setUTCMonth(f1.getUTCMonth()+1);break;default:throw new Error("Unknown IntervalType: "+i1+"; "+this);}f1.setUTCMilliseconds(f1.getUTCMilliseconds()-1);f1=a._createLocalDate(f1,true);this.fireIntervalSelect({startDate:e1,endDate:f1,subInterval:false,row:undefined});};v.prototype._buildPCRowDateRange=function(i){var j=new D();if(i.getStartDate()){j.setStartDate(new Date(i.getStartDate().getTime()));}if(i.getEndDate()){j.setEndDate(new Date(i.getEndDate().getTime()));}j.data(P.PC_FOREIGN_KEY_NAME,i.getId());return j;};function F(i){var j=i.getParameter("startDate");var e1=this.getViewKey();var f1=this._getView(e1);var g1=f1.getIntervalType();if(g1===t.OneMonth&&a._isNextMonth(j,this.getStartDate())){this._oOneMonthInterval._handleNext();return;}var h1=i.getParameter("endDate");var i1=i.getParameter("subInterval");var j1=i.oSource._oPlanningCalendarRow;this.fireIntervalSelect({startDate:j,endDate:h1,subInterval:i1,row:j1});}v.prototype._applyContextualSettings=function(){return C.prototype._applyContextualSettings.call(this,{contextualWidth:this.$().width()});};function H(i,j){this.$().toggleClass("sapMPlanCalWithWeekNumbers",i&&j);}function J(i,j){this.$().toggleClass("sapMPlanCalWithDayNamesLine",i&&j);}function N(j,e1){this._applyContextualSettings();if(j.size.width<=0){return;}var f1=this.getRows();var g1;var i=0;var h1=this._iSize;V.call(this,j.size.width);if(h1!=this._iSize){W.call(this,this._iSize);var i1=this.getViewKey();var j1=this._getView(i1);var k1=j1.getIntervalType();var l1=this._getIntervals(j1);for(i=0;i<f1.length;i++){g1=f1[i];var m1=g1.getCalendarRow();if(l1!=m1.getIntervals()){m1.setIntervals(l1);}else{m1.handleResize();}}switch(k1){case t.Hour:if(this._oTimeInterval&&this._oTimeInterval.getItems()!=l1){this._oTimeInterval.setItems(l1);}break;case t.Day:if(this._oDateInterval&&this._oDateInterval.getDays()!=l1){this._oDateInterval.setDays(l1);}break;case t.Month:if(this._oMonthInterval&&this._oMonthInterval.getMonths()!=l1){this._oMonthInterval.setMonths(l1);}break;case t.Week:if(this._oWeekInterval&&this._oWeekInterval.getDays()!=l1){this._oWeekInterval.setDays(l1);}break;case t.OneMonth:if(this._oOneMonthInterval&&this._oOneMonthInterval.getDays()!=l1){this._oOneMonthInterval.setDays(l1);if(this._iSize>1){this._setRowsStartDate(new Date(this.getStartDate().getTime()));}}break;default:throw new Error("Unknown IntervalType: "+k1+"; "+this);}a1.call(this);}else if(!e1){for(i=0;i<f1.length;i++){g1=f1[i];g1.getCalendarRow().handleResize();}}if(this._oOneMonthInterval){this._oOneMonthInterval._setDisplayMode(this._iSize);}if(this.getStickyHeader()){this._updateStickyHeader();}}function O(e1){var f1=e1.getParameter("appointment"),g1=e1.getParameter("multiSelect"),h1=e1.getParameter("appointments"),i1=e1.getParameter("domRefId"),j1,k1,l1,m1,n1,o1,i,j;if(!g1){k1=this.getRows();for(i=0;i<k1.length;i++){l1=k1[i];m1=l1.getCalendarRow();if(e1.oSource!=m1){n1=l1.getAppointments();for(j=0;j<n1.length;j++){o1=n1[j];o1.setSelected(false);}}}}j1={appointment:f1,appointments:h1,multiSelect:g1,domRefId:i1};this.fireAppointmentSelect(j1);}v.prototype._setRowsStartDate=function(j){var e1=this.getRows(),f1,i;for(i=0;i<e1.length;i++){f1=e1[i];f1.getCalendarRow().setStartDate(j);}};v.prototype._toggleAppointmentsColumnPopinState=function(i){var j=this.getAggregation("table"),e1=j.getColumns()[1];e1.setDemandPopin(i);e1.setMinScreenWidth(i?A:"");};v.prototype._getViews=function(){var i=this.getViews(),j=this.getBuiltInViews(),e1,f1=[],g1=p,h1=t;if(!this._oViews){this._oViews={};}if(j.length){f1=j;}else{f1=i.length?[]:K;}e1=f1.map(function(j1){switch(j1){case g1.Hour:return this._oViews[g1.Hour]||(this._oViews[g1.Hour]=new sap.m.PlanningCalendarView(this.getId()+"-HourView",{key:g1.Hour,intervalType:h1.Hour,description:this._oRB.getText("PLANNINGCALENDAR_HOURS"),intervalsS:6,intervalsM:6,intervalsL:12}));case g1.Day:return this._oViews[g1.Day]||(this._oViews[g1.Day]=new sap.m.PlanningCalendarView(this.getId()+"-DayView",{key:g1.Day,intervalType:h1.Day,description:this._oRB.getText("PLANNINGCALENDAR_DAYS"),intervalsS:7,intervalsM:7,intervalsL:14}));case g1.Month:return this._oViews[g1.Month]||(this._oViews[g1.Month]=new sap.m.PlanningCalendarView(this.getId()+"-MonthView",{key:g1.Month,intervalType:h1.Month,description:this._oRB.getText("PLANNINGCALENDAR_MONTHS"),intervalsS:3,intervalsM:6,intervalsL:12}));case g1.Week:return this._oViews[g1.Week]||(this._oViews[g1.Week]=new sap.m.PlanningCalendarView(this.getId()+"-WeekView",{key:g1.Week,intervalType:h1.Week,description:this._oRB.getText("PLANNINGCALENDAR_WEEK"),intervalsS:7,intervalsM:7,intervalsL:7}));case g1.OneMonth:return this._oViews[g1.OneMonth]||(this._oViews[g1.OneMonth]=new sap.m.PlanningCalendarView(this.getId()+"-OneMonthView",{key:g1.OneMonth,intervalType:h1.OneMonth,description:this._oRB.getText("PLANNINGCALENDAR_ONE_MONTH"),intervalsS:1,intervalsM:1,intervalsL:31}));default:q.sap.log.error("Cannot get PlanningCalendar views. Invalid view key "+j1);break;}},this);for(var i1 in this._oViews){if(f1.indexOf(i1)<0){this._oViews[i1].destroy();delete this._oViews[i1];}}if(i.length){e1=e1.concat(i);}return e1;};v.prototype.getSelectedAppointments=function(){var i=[];this.getRows().filter(function(j){i.push.apply(i,j.getCalendarRow().aSelectedAppointments);});return i;};v.prototype.setCustomAppointmentsSorterCallback=function(i){if(typeof i==="function"||i===null||i===undefined){this.getRows().forEach(function(j){var e1=j.getCalendarRow();e1._setCustomAppointmentsSorterCallback(i);});this._fnCustomSortedAppointments=i;}else{q.sap.log.warning("Your custom sort function won't be used, but the old one will be preserved.",this);}return this;};v.prototype.getCustomAppointmentsSorterCallback=function(){return this._fnCustomSortedAppointments;};v.prototype._onRowDeselectAppointment=function(){var e1=this.getRows();for(var i=0;i<e1.length;i++){var f1=e1[i].getCalendarRow().aSelectedAppointments;for(var j=0;j<f1.length;j++){var g1=sap.ui.getCore().byId(f1[j]);if(g1){g1.setProperty("selected",false,true);g1.$().removeClass("sapUiCalendarAppSel");}}e1[i].getCalendarRow().aSelectedAppointments=[];}};function Q(j){var e1=[];var f1=this.getRows();for(var i=0;i<f1.length;i++){var g1=f1[i];var h1=g1.getColumnListItem();var i1=h1.getSelected();if(g1.getSelected()!=i1){g1.setProperty("selected",i1,true);e1.push(g1);}}if(!this.getSingleSelection()){$.call(this);}if(e1.length>0){this.fireRowSelectionChange({rows:e1});}}function U(){var i=this.getAggregation("table");if(this.getToolbarContent().length>0){if(!this._oToolbar){this._oToolbar=new sap.m.OverflowToolbar(this.getId()+"-Toolbar",{design:n.Transpaent});this._oToolbar._oPlanningCalendar=this;this._oToolbar.getContent=function(){return this._oPlanningCalendar.getToolbarContent();};}if(!i.getHeaderToolbar()){i.setHeaderToolbar(this._oToolbar);}}else if(i.getHeaderToolbar()){i.setHeaderToolbar();}this._oToolbar.invalidate();}function V(i){if(i<this._iBreakPointTablet){this._iSize=0;}else if(i<this._iBreakPointDesktop){this._iSize=1;}else{this._iSize=2;}if(i<y.PHONE){this._iSizeScreen=0;}else if(i<y.TABLET){this._iSizeScreen=1;}else{this._iSizeScreen=2;}}function W(j){var e1='sapMSize'+j,f1=this.$(),i,g1;if(f1){for(i=0;i<3;i++){g1='sapMSize'+i;if(g1===e1){f1.addClass(g1);}else{f1.removeClass(g1);}}}}function X(){var j=this._getViews();this._oIntervalTypeSelect.destroyItems();var i;var e1;for(i=0;i<j.length;i++){var f1=j[i];e1=new I(this.getId()+"-"+i,{key:f1.getKey(),text:f1.getDescription(),tooltip:f1.getTooltip()});this._oIntervalTypeSelect.addItem(e1);}this._oIntervalTypeSelect.setVisible(!(j.length===1));}function Y(i){var j=i.getParameter("selected");var e1=this.getRows();if(j){e1=this.getRows().filter(function(f1){return!f1.getSelected();});}this.selectAllRows(j);this.fireRowSelectionChange({rows:e1});}function Z(j){var e1=j.oSource;var f1=j.getParameter("type");var g1=this.getRows();var h1;var i1;var j1;var k1;var i=0;var l1=0;var m1;for(i=0;i<g1.length;i++){h1=g1[i];if(h1.getCalendarRow()==e1){l1=i;break;}}switch(f1){case"sapup":j1=e1.getFocusedAppointment();k1=j1.getStartDate();if(l1>0){l1--;}i1=g1[l1];i1.getCalendarRow().focusNearestAppointment(k1);break;case"sapdown":j1=e1.getFocusedAppointment();k1=j1.getStartDate();if(l1<g1.length-1){l1++;}i1=g1[l1];i1.getCalendarRow().focusNearestAppointment(k1);break;case"saphome":if(l1>0){i1=g1[0];m1=new q.Event(f1);m1._bPlanningCalendar=true;i1.getCalendarRow().onsaphome(m1);}break;case"sapend":if(l1<g1.length-1){i1=g1[g1.length-1];m1=new q.Event(f1);m1._bPlanningCalendar=true;i1.getCalendarRow().onsapend(m1);}break;default:break;}}function $(){if(this._oSelectAllCheckBox){var i=this.getRows();var j=this.getSelectedRows();if(i.length==j.length&&j.length>0){this._oSelectAllCheckBox.setSelected(true);}else{this._oSelectAllCheckBox.setSelected(false);}}}function a1(){if(this.getSingleSelection()){if(this._oCalendarHeader.getAllCheckBox()){this._oCalendarHeader.setAllCheckBox();}else if(this._oInfoToolbar.getContent().length>2){this._oInfoToolbar.removeContent(this._oSelectAllCheckBox);}}else{if(!this._oSelectAllCheckBox){this._oSelectAllCheckBox=new sap.m.CheckBox(this.getId()+"-All",{text:this._oRB.getText("COLUMNSPANEL_SELECT_ALL")});this._oSelectAllCheckBox.attachEvent("select",Y,this);}if(this._iSizeScreen<2||!this.getShowRowHeaders()){var i=this._oInfoToolbar.indexOfContent(this._oSelectAllCheckBox);if(this._iSizeScreen<2){if(i<this._oInfoToolbar.getContent().length-1){this._oInfoToolbar.addContent(this._oSelectAllCheckBox);}}else if(i<0||i>1){if(i>1){this._oInfoToolbar.removeContent(this._oSelectAllCheckBox);}this._oInfoToolbar.insertContent(this._oSelectAllCheckBox,1);}}else{this._oCalendarHeader.setAllCheckBox(this._oSelectAllCheckBox);}}}function b1(i){if(i.getParameter("name")=="selected"){$.call(this);}}function c1(){var i=this.getAggregation("table");var j=i.getMode();var e1;if(this.getSingleSelection()){if(!this.getShowRowHeaders()&&this.getRows().length==1){e1=L.None;}else{e1=L.SingleSelectMaster;}}else{e1=L.MultiSelect;}if(j!=e1){i.setMode(e1);}}function d1(){return this._oTimeInterval||this._oDateInterval||this._oMonthInterval||this._oWeekInterval||this._oOneMonthInterval;}return v;});
